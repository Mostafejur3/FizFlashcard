<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiz Flashcards - HSK 4 Mastery</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
 
    <script src="supabase-config.js" defer></script>
    <script src="script.js" defer></script>
    <script src="admin.js" defer></script>

</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container header-content">
            <div class="logo-section">
                <div class="logo">
                    <a href="#" class="nav-link" data-page="home" style="text-decoration:none; color:inherit;">
                    <h1>fiz <span>flashcard</span></h1>
                    </a>
                </div>
                <button class="refresh-btn" id="refreshButton" title="Refresh Page (Ctrl+F5)">
                    <i class="fas fa-sync-alt"></i>
                    <span>refresh</span>
                </button>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="desktop-nav">
                <ul>
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="plans">Plans</a></li>
                    <li><a href="#" class="nav-link" data-page="account">My Account</a></li>
                </ul>
            </nav>
            <nav id="mobileNav">
                <div class="mobile-logo" style="padding: 20px; text-align: center; border-bottom: 1px solid #eee;">
                    <a href="#" class="nav-link" data-page="home" style="text-decoration:none; color:inherit;">
                        <h1 style="font-size: 20px; margin: 0;">fiz <span style="color: var(--primary);">flashcard</span></h1>
                    </a>
                </div>
                <ul>
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="plans">Plans</a></li>
                    <li><a href="#" class="nav-link" data-page="account">My Account</a></li>
                </ul>
                <div class="auth-buttons">
                    <button class="login-btn" id="loginButtonMobile">Login</button>
                    <button class="signup-btn" id="signupButtonMobile">Sign Up</button>
                    <button class="logout-btn" id="logoutButtonMobile" style="display: none;">Logout</button>
                </div>
            </nav>
            <div class="auth-buttons">
                <button class="login-btn" id="loginButton">Login</button>
                <button class="signup-btn" id="signupButton">Sign Up</button>
                <button class="logout-btn" id="logoutButton" style="display: none;">Logout</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container main-content">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="hsk-selector">
                <h3>HSK Level</h3>
                <div class="hsk-dropdown">
                    <button class="hsk-dropdown-btn" id="hskDropdownBtn">
                        <span id="selectedHsk">HSK 4</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="hsk-dropdown-content" id="hskDropdownContent">
                        <div class="hsk-option" data-hsk="1">HSK 1</div>
                        <div class="hsk-option" data-hsk="2">HSK 2</div>
                        <div class="hsk-option" data-hsk="3">HSK 3</div>
                        <div class="hsk-option active" data-hsk="4">HSK 4</div>
                    </div>
                </div>
            </div>
            <h3>Word Groups</h3>
            <div class="word-group-selector">
                <div class="group-options">
                    <div class="group-option active" data-group="1-100">Group 1 (1-100) <span>0%</span></div>
                    <div class="group-option" data-group="101-200">Group 2 (101-200) <span>0%</span></div>
                    <div class="group-option" data-group="201-300">Group 3 (201-300) <span>0%</span></div>
                    <div class="group-option" data-group="301-400">Group 4 (301-400) <span>0%</span></div>
                    <div class="group-option" data-group="401-500">Group 5 (401-500) <span>0%</span></div>
                    <div class="group-option" data-group="501-600">Group 6 (501-600) <span>0%</span></div>
                    <div class="group-option" data-group="1-600">All Words (1-600) <span>0%</span></div>
                </div>
            </div>

            <!-- Group Progress Section (Smaller) -->
            <div class="group-progress-section">
                <h3>Your Progress on Selected Group</h3>
                <div class="selected-group-name" id="selectedGroupName">Group 1 (1-100)</div>
                <div class="progress-item">
                    <div class="progress-header">
                        <span id="progressHskLevel"></span>
                        <span>0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card" id="masteredWords">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Words Completed</div>
                    </div>
                    <div class="stat-card" id="remainingWords">
                        <div class="stat-number">100</div>
                        <div class="stat-label">Words Remaining</div>
                    </div>
                    <div class="stat-card" id="reviewWords">
                        <div class="stat-number">0</div>
                        <div class="stat-label">On Review</div>
                    </div>
                    <div class="stat-card" id="bookmarks">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Bookmarks</div>
                    </div>
                </div>
            </div>

            <!-- Overall Progress Section -->
            <div class="progress-section">
                <h3>Overall Progress</h3>
                <div class="progress-item">
                    <div class="progress-header">
                        <span id="overallProgressHskLevel">HSK 4</span>
                        <span>0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overallProgressFill" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card" id="overallMasteredWords">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Words Completed</div>
                    </div>
                    <div class="stat-card" id="overallRemainingWords">
                        <div class="stat-number">600</div>
                        <div class="stat-label">Words Remaining</div>
                    </div>
                    <div class="stat-card" id="overallReviewWords">
                        <div class="stat-number">0</div>
                        <div class="stat-label">On Review</div>
                    </div>
                    <div class="stat-card" id="overallBookmarks">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Bookmarks</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flashcard Area -->
        <div class="flashcard-area" id="flashcardPage">
            <div class="flashcard-container">
                <button class="bookmark-toggle" title="Bookmark this word">
                    <i class="fas fa-heart"></i>
                </button>
                <div class="flashcard">
                    <div class="flashcard-front">
                        <div class="chinese-character">学习</div>
                        <p class="instruction">Click to flip card</p>
                    </div>
                    <div class="flashcard-back">
                        <div class="pinyin">xué xí</div>
                        <div class="meaning">to study, to learn</div>
                        <div class="bangla">শেখা, অধ্যয়ন</div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn review-btn">
                    <i class="fas fa-redo-alt"></i> Need Review
                </button>
                <button class="action-btn next-btn">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button class="action-btn master-btn">
                    <i class="fas fa-check"></i> Completed
                </button>
            </div>
        </div>

        <!-- Plans Page -->
        <div class="flashcard-area" id="plansPage" style="display: none;">
            <h2>Choose Your Plan</h2>
            
            <!-- Plan Section -->
            <div class="plan-section">
                <h3><i class="fas fa-bullhorn"></i> Announcements & Updates</h3>
                <div class="admin-message-area" id="adminMessageArea">
                    Welcome to FizFlashcard! We're constantly improving our platform to provide you with the best Chinese learning experience. Stay tuned for new features and content updates!
                </div>
            </div>
            <div class="plans-container">
                <div class="plan-card free-plan">
                    <h3>Free Plan</h3>
                    <div class="plan-price">0 RMB</div>
                    <ul class="plan-features">
                        <li>Access to first 50 words</li>
                        <li>Basic progress tracking</li>
                        <li>Demo mode only</li>
                    </ul>
                    <button class="plan-select" data-plan="free" disabled>Current Plan</button>
                </div>
                <div class="plan-card">
                    <h3>1 Month Access</h3>
                    <div class="plan-price">5 RMB</div>
                    <ul class="plan-features">
                        <li>Full access to all flashcards</li>
                        <li>Progress tracking</li>
                        <li>All HSK 4 words</li>
                        <li>30 days access</li>
                    </ul>
                    <button class="plan-select" data-plan="1month">Select Plan</button>
                </div>
                <div class="plan-card">
                    <h3>6 Months Access</h3>
                    <div class="plan-price">10 RMB</div>
                    <ul class="plan-features">
                        <li>Full access to all flashcards</li>
                        <li>Progress tracking</li>
                        <li>All HSK 4 words</li>
                        <li>180 days access</li>
                        <li>Save 66%</li>
                    </ul>
                    <button class="plan-select" data-plan="6months">Select Plan</button>
                </div>
                <div class="plan-card">
                    <h3>Lifetime Access</h3>
                    <div class="plan-price">20 RMB</div>
                    <ul class="plan-features">
                        <li>Full access to all flashcards</li>
                        <li>Progress tracking</li>
                        <li>All HSK 4 words</li>
                        <li>Lifetime access</li>
                        <li>Best value</li>
                    </ul>
                    <button class="plan-select" data-plan="lifetime">Select Plan</button>
                </div>
            </div>
        </div>

        <!-- Account Page -->
        <div class="flashcard-area" id="accountPage" style="display: none;">
            <h2>My Account</h2>
            <div class="account-details">
                <div class="stat-card">
                    <div class="stat-number" id="userName">-</div>
                    <div class="stat-label">Full Name</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number email-text" id="userEmail">-</div>
                    <div class="stat-label">Email</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="userUniversity">-</div>
                    <div class="stat-label">University</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="userPlan">Free Plan</div>
                    <div class="stat-label">Current Plan</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="enrollmentDate">-</div>
                    <div class="stat-label">Enrollment Date</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="remainingDays">-</div>
                    <div class="stat-label">Remaining Days</div>
                </div>
            </div>
            
            <div class="account-settings-mobile" style="margin-top: 30px;">
                <h3>Account Settings</h3>
                <button class="action-btn master-btn" id="changePasswordBtn" style="margin-bottom: 15px;">
                    <i class="fas fa-key"></i> Change Password
                </button>
                <button class="action-btn review-btn" id="resetProgressBtn">
                    <i class="fas fa-trash-alt"></i> Reset Progress
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>fiz flashcard</h3>
                <p>Master Chinese with our intelligent flashcard system</p>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: support@fizflashcard.com</p>
                <p>Phone: +880 XXX-XXXXXXX</p>
            </div>
            <div class="footer-section">
                <h3>Payment Methods</h3>
                <p>Alipay</p>
                <p>WeChat Pay</p>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 fiz flashcard. <span class="admin-access-text">All</span> rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login to Your Account</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="form-submit">Login</button>
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" id="switchToSignup">Sign Up</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create an Account</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label for="signupUniversity">University</label>
                    <input type="text" id="signupUniversity">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required>
                </div>
                <div class="form-group">
                    <label for="signupConfirmPassword">Confirm Password</label>
                    <input type="password" id="signupConfirmPassword" required>
                </div>
                <button type="submit" class="form-submit">Sign Up</button>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" id="switchToLogin">Login</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Select Payment Method</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label>Selected Plan: <span id="selectedPlanText">1 Month Access (5 RMB)</span></label>
            </div>
            <div class="payment-gateways">
                <div class="gateway-grid" id="paymentGatewayGrid">
                    <!-- Payment gateways will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Proof Modal -->
    <div class="modal" id="paymentProofModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Upload Payment Proof</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label>Selected Plan: <span id="proofPlanText">1 Month Access (5 RMB)</span></label>
            </div>
            <div class="form-group">
                <label>Payment Method: <span id="proofMethodText">Alipay</span></label>
            </div>
            <div class="form-group">
                <label for="paymentAccount" class="muted-label">Payment Account Name/Phone Number</label>
                <input type="text" id="paymentAccount" placeholder="Enter account name or phone number" required>
            </div>
            <div class="form-group">
                <label for="transactionId" class="muted-label">Transaction ID</label>
                <input type="text" id="transactionId" placeholder="Enter your transaction ID">
            </div>
            <div class="form-group">
                <label for="paymentNote" class="muted-label">Note (Optional)</label>
                <textarea id="paymentNote" rows="3" placeholder="Any additional information..."></textarea>
            </div>
            <div class="form-group">
                <input type="file" id="paymentProofFile" accept="image/*" required>
                <p style="font-size: 0.9rem; color: #666;">Upload a screenshot of your payment confirmation</p>
            </div>
            <button class="form-submit" id="submitPaymentProof">Submit Payment Proof</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 style="text-align: center;">Payment Successful!</h3>
            <p style="text-align: center; margin-bottom: 20px;">Your plan has been activated successfully.</p>
            <button class="form-submit" id="successOk">OK</button>
        </div>
    </div>

    <!-- Reset Progress Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Progress</h3>
                <button class="close-modal">&times;</button>
            </div>
            <p style="margin-bottom: 20px;">This will erase all your progress. Please confirm your password to continue.</p>
            <div class="form-group">
                <label for="resetPassword">Password</label>
                <input type="password" id="resetPassword" required>
            </div>
            <button class="form-submit" id="confirmReset">Reset Progress</button>
        </div>
    </div>

    <!-- Word List Modal -->
    <div class="modal" id="wordListModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 id="wordListTitle">Word List</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div style="max-height: 400px; overflow-y: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #eee;">
                            <th style="text-align: left; padding: 10px;">Chinese</th>
                            <th style="text-align: left; padding: 10px;">Pinyin</th>
                            <th style="text-align: left; padding: 10px;">English</th>
                            <th style="text-align: left; padding: 10px;">Bangla</th>
                        </tr>
                    </thead>
                    <tbody id="wordListBody">
                        <!-- Word list will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="modal" id="adminPanel">
        <div class="modal-content" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h3>Admin Panel</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="users">Users Control</button>
                <button class="admin-tab" data-tab="site">Site Control</button>
                <button class="admin-tab" data-tab="payment">Payment Settings</button>
                <button class="admin-tab" data-tab="pending">Pending Requests</button>
                <button class="admin-tab" data-tab="hsk">HSK & CSV Management</button>
                <button class="admin-tab" data-tab="database">Database Config</button>
            </div>
            
            <!-- Users Control Tab -->
            <div class="admin-tab-content" id="usersTab">
                <h4>User Management</h4>
                <div class="users-control-container">
                    <div class="users-filter">
                        <button class="filter-btn active" data-filter="all">All Users</button>
                        <button class="filter-btn" data-filter="free">Free Plan</button>
                        <button class="filter-btn" data-filter="1month">1 Month</button>
                        <button class="filter-btn" data-filter="6months">6 Months</button>
                        <button class="filter-btn" data-filter="lifetime">Lifetime</button>
                    </div>
                <div class="users-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>University</th>
                                <th>Current Plan</th>
                                <th>Enrollment Date</th>
                                    <th>Remaining Days</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                    </div>
                </div>
            </div>
            
            <!-- Site Control Tab -->
            <div class="admin-tab-content" id="siteTab" style="display: none;">
                <h4>Plan Management</h4>
                <div class="plan-editor">
                    <div class="plan-card-editor">
                        <h5>1 Month Access</h5>
                        <div class="form-group">
                            <label>Price (RMB)</label>
                            <input type="number" id="plan1Price" value="5">
                        </div>
                        <div class="form-group">
                            <label>Features (one per line)</label>
                            <textarea id="plan1Features" rows="4">Full access to all flashcards
Progress tracking
All HSK 4 words
30 days access</textarea>
                        </div>
                    </div>
                    <div class="plan-card-editor">
                        <h5>6 Months Access</h5>
                        <div class="form-group">
                            <label>Price (RMB)</label>
                            <input type="number" id="plan6Price" value="10">
                        </div>
                        <div class="form-group">
                            <label>Features (one per line)</label>
                            <textarea id="plan6Features" rows="4">Full access to all flashcards
Progress tracking
All HSK 4 words
180 days access
Save 66%</textarea>
                        </div>
                    </div>
                    <div class="plan-card-editor">
                        <h5>Lifetime Access</h5>
                        <div class="form-group">
                            <label>Price (RMB)</label>
                            <input type="number" id="planLifetimePrice" value="20">
                        </div>
                        <div class="form-group">
                            <label>Features (one per line)</label>
                            <textarea id="planLifetimeFeatures" rows="4">Full access to all flashcards
Progress tracking
All HSK 4 words
Lifetime access
Best value</textarea>
                        </div>
                    </div>
                </div>
                <button class="form-submit" id="savePlans">Save Plan Changes</button>
                
                <h4 style="margin-top: 40px;">Admin Credentials</h4>
                <div class="plan-editor">
                    <div class="plan-card-editor">
                        <h5>Admin Login Settings</h5>
                        <div class="form-group">
                            <label for="siteAdminId">Admin ID</label>
                            <input type="text" id="siteAdminId" placeholder="Enter admin ID">
                        </div>
                        <div class="form-group">
                            <label for="siteAdminPassword">Admin Password</label>
                            <input type="password" id="siteAdminPassword" placeholder="Enter admin password">
                        </div>
                        <p style="font-size: 0.9rem; color: #666;">Tip: Click "Save Plan Changes" above to save credentials.</p>
                    </div>
                </div>
                
                <h4 style="margin-top: 40px;">Admin Messages</h4>
                <div class="admin-message-section">
                    <div class="form-group">
                        <label for="adminMessage">Plan Section Message</label>
                        <textarea id="adminMessage" rows="4" placeholder="Enter announcements, updates, or advertisements for the Plan Section...">Welcome to FizFlashcard! We're constantly improving our platform to provide you with the best Chinese learning experience. Stay tuned for new features and content updates!</textarea>
                    </div>
                    <button class="form-submit" id="saveAdminMessage">Save Message</button>
                </div>
                
                <h4 style="margin-top: 40px;">Footer Content Management</h4>
                <div class="footer-settings">
                    <div class="footer-section-editor">
                        <h5>Company Information</h5>
                        <div class="form-group">
                            <label for="footerCompanyName">Company Name</label>
                            <input type="text" id="footerCompanyName" value="fiz flashcard">
                        </div>
                        <div class="form-group">
                            <label for="footerDescription">Description</label>
                            <textarea id="footerDescription" rows="3">Master Chinese with our intelligent flashcard system</textarea>
                        </div>
                    </div>
                    
                    <div class="footer-section-editor">
                        <h5>Contact Information</h5>
                        <div class="form-group">
                            <label for="footerEmail">Email</label>
                            <input type="email" id="footerEmail" value="support@fizflashcard.com">
                        </div>
                        <div class="form-group">
                            <label for="footerPhone">Phone</label>
                            <input type="text" id="footerPhone" value="+880 XXX-XXXXXXX">
                        </div>
                    </div>
                    
                    <div class="footer-section-editor">
                        <h5>Payment Methods</h5>
                        <div class="form-group">
                            <label for="footerPaymentMethods">Payment Methods (one per line)</label>
                            <textarea id="footerPaymentMethods" rows="3">Alipay
WeChat Pay</textarea>
                        </div>
                    </div>
                    
                    <div class="footer-section-editor">
                        <h5>Copyright Information</h5>
                        <div class="form-group">
                            <label for="footerCopyright">Copyright Text</label>
                            <input type="text" id="footerCopyright" value="© 2025 fiz flashcard. All rights reserved.">
                        </div>
                    </div>
                </div>
                <button class="form-submit" id="saveFooterSettings">Save Footer Settings</button>
                
                <h4 style="margin-top: 40px;">Word List Management</h4>
                <div class="csv-upload-section">
                    <div class="form-group">
                        <label>Upload CSV File</label>
                        <input type="file" id="csvFile" accept=".csv" style="margin-bottom: 10px;">
                        <p style="font-size: 0.9rem; color: #666;">CSV format: Chinese Character, Pinyin, English, Bangla</p>
                    </div>
                    <button class="form-submit" id="uploadCsv">Upload Words</button>
                </div>
            </div>
            
            
            <!-- HSK & CSV Management Tab -->
            <div class="admin-tab-content" id="hskTab" style="display: none;">
                <h4>HSK Level & CSV Management</h4>
                <div class="hsk-csv-management">
                    <div class="hsk-levels-section">
                        <h5>HSK Levels Overview</h5>
                        <div class="hsk-levels-grid">
                            <div class="hsk-level-card" data-level="hsk1">
                                <div class="level-header">
                                    <h6>HSK 1</h6>
                                    <span class="word-count">150 words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-50</div>
                                    <div class="group">Group 2: 51-100</div>
                                    <div class="group">Group 3: 101-150</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk1" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk1').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk1')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk1')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                            
                            <div class="hsk-level-card" data-level="hsk2">
                                <div class="level-header">
                                    <h6>HSK 2</h6>
                                    <span class="word-count">150 words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-50</div>
                                    <div class="group">Group 2: 51-100</div>
                                    <div class="group">Group 3: 101-150</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk2" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk2').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk2')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk2')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                            
                            <div class="hsk-level-card" data-level="hsk3">
                                <div class="level-header">
                                    <h6>HSK 3</h6>
                                    <span class="word-count">300 words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-100</div>
                                    <div class="group">Group 2: 101-200</div>
                                    <div class="group">Group 3: 201-300</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk3" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk3').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk3')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk3')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                            
                            <div class="hsk-level-card" data-level="hsk4">
                                <div class="level-header">
                                    <h6>HSK 4</h6>
                                    <span class="word-count">600 words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-100</div>
                                    <div class="group">Group 2: 101-200</div>
                                    <div class="group">Group 3: 201-300</div>
                                    <div class="group">Group 4: 301-400</div>
                                    <div class="group">Group 5: 401-500</div>
                                    <div class="group">Group 6: 501-600</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk4" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk4').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk4')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk4')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                            
                            <div class="hsk-level-card" data-level="hsk5">
                                <div class="level-header">
                                    <h6>HSK 5</h6>
                                    <span class="word-count">1300 words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-433</div>
                                    <div class="group">Group 2: 434-866</div>
                                    <div class="group">Group 3: 867-1300</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk5" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk5').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk5')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk5')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                            
                            <div class="hsk-level-card" data-level="hsk6">
                                <div class="level-header">
                                    <h6>HSK 6</h6>
                                    <span class="word-count">1300+ words</span>
                                </div>
                                <div class="level-groups">
                                    <div class="group">Group 1: 1-433</div>
                                    <div class="group">Group 2: 434-866</div>
                                    <div class="group">Group 3: 867+</div>
                                </div>
                                <div class="level-actions">
                                    <input type="file" id="csvFileHsk6" accept=".csv" style="display: none;">
                                    <button class="upload-btn" onclick="document.getElementById('csvFileHsk6').click()">Upload CSV</button>
                                    <button class="view-btn" onclick="viewHskWords('hsk6')">View Words</button>
                                    <button class="reset-btn" onclick="resetHskWords('hsk6')" style="padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: var(--transition); background: #dc3545; color: white; flex: 1; min-width: 100px;">Reset</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="words-display-section" id="wordsDisplaySection" style="display: none;">
                        <h5 id="wordsDisplayTitle">Words for HSK Level</h5>
                        <div id="wordsDisplayContent">
                            <!-- Words will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
            
            
            <!-- Payment Settings Tab -->
            <div class="admin-tab-content" id="paymentTab" style="display: none;">
                <h4>Payment & Proof Management</h4>
                <div class="payment-settings">
                    <!-- Payment Methods Section -->
                    <div class="payment-methods-section">
                        <h5>Payment Methods</h5>
                        <div class="payment-methods-grid">
                            <div id="paymentMethodsList">
                                <!-- Payment methods will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Payment Method Form -->
                        <div id="paymentMethodForm" style="background: #f8f9fa; padding: 20px; border: 1px solid #dee2e6; border-radius: 8px; margin-top: 20px;">
                            <h6 style="margin-bottom: 15px; color: #333;">Add New Payment Method</h6>
                            <div class="form-group">
                                <label for="paymentMethodName">Payment Method Name *</label>
                                <input type="text" id="paymentMethodName" placeholder="e.g., Alipay, WeChat Pay, BKash" required>
                            </div>
                            <div class="form-group">
                                <label for="paymentMethodDescription">Description</label>
                                <input type="text" id="paymentMethodDescription" placeholder="e.g., Mobile payment, Bank transfer">
                            </div>
                            <div class="form-group">
                                <label for="paymentMethodAccount">Account Information</label>
                                <input type="text" id="paymentMethodAccount" placeholder="e.g., Account: 1234567890">
                            </div>
                        <div class="form-group">
                                <label for="paymentMethodImage">Upload Image</label>
                                <input type="file" id="paymentMethodImage" accept="image/*">
                                <img id="paymentMethodImagePreview" style="max-width: 100px; max-height: 100px; margin-top: 10px; display: none; border-radius: 4px;">
                            </div>
                            <button class="form-submit" id="savePaymentMethod">Save Payment Method</button>
                        </div>
                        
                        <button class="form-submit" id="addPaymentMethod" style="margin-top: 20px;">Add Payment Method</button>
                    </div>
                    
                    <!-- Payment Instructions Section -->
                    <div class="payment-instructions-section">
                        <h5>Payment Instructions</h5>
                        <div class="form-group">
                            <label for="paymentInstructions">Instructions (HTML allowed)</label>
                            <textarea id="paymentInstructions" rows="6" placeholder="Enter payment instructions...">Please follow these steps to complete your payment:

1. Choose your preferred payment method
2. Scan the QR code or use the provided account details
3. Complete the payment using your mobile banking app
4. Upload payment proof and enter transaction details
5. Wait for admin approval (usually within 24 hours)

For any issues, contact us at support@fizflashcard.com</textarea>
                        </div>
                    </div>
                    
                    <!-- Payment Proof Details Section -->
                    <div class="payment-proof-details-section">
                        <h5>Payment Proof Form Settings</h5>
                        <div class="form-group">
                            <label for="proofTitle">Form Title</label>
                            <input type="text" id="proofTitle" placeholder="Upload Payment Proof">
                        </div>
                        <div class="form-group">
                            <label for="proofDescription">Form Description</label>
                            <textarea id="proofDescription" rows="3" placeholder="Please upload a screenshot of your payment confirmation..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="proofAccountLabel">Account Field Label</label>
                            <input type="text" id="proofAccountLabel" placeholder="Payment Account Name/Phone">
                        </div>
                        <div class="form-group">
                            <label for="proofAccountPlaceholder">Account Field Placeholder</label>
                            <input type="text" id="proofAccountPlaceholder" placeholder="Enter your Alipay/WeChat account name or phone number">
                        </div>
                        <div class="form-group">
                            <label for="proofTransactionLabel">Transaction ID Field Label</label>
                            <input type="text" id="proofTransactionLabel" placeholder="Transaction ID">
                        </div>
                        <div class="form-group">
                            <label for="proofTransactionPlaceholder">Transaction ID Field Placeholder</label>
                            <input type="text" id="proofTransactionPlaceholder" placeholder="Enter the transaction ID from your payment">
                        </div>
                        <div class="form-group">
                            <label for="proofNoteLabel">Note Field Label</label>
                            <input type="text" id="proofNoteLabel" placeholder="Additional Note (Optional)">
                        </div>
                        <div class="form-group">
                            <label for="proofNotePlaceholder">Note Field Placeholder</label>
                            <input type="text" id="proofNotePlaceholder" placeholder="Any additional information about your payment">
                        </div>
                    </div>
                    
                    <!-- Approval Messages Section -->
                    <div class="approval-messages-section">
                        <h5>Approval Messages</h5>
                        <div class="form-group">
                            <label for="pendingMessage">Pending Message</label>
                            <textarea id="pendingMessage" rows="3" placeholder="Message shown after payment proof submission..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="approvedMessage">Approved Message</label>
                            <textarea id="approvedMessage" rows="3" placeholder="Message shown when payment is approved..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="rejectedMessage">Rejected Message</label>
                            <textarea id="rejectedMessage" rows="3" placeholder="Message shown when payment is rejected..."></textarea>
                        </div>
                    </div>
                    
                    <!-- Email Settings Section -->
                    <div class="email-settings-section">
                        <h5>Email Notifications</h5>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="emailEnabled"> Enable Email Notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="smtpHost">SMTP Host</label>
                            <input type="text" id="smtpHost" placeholder="smtp.gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="smtpPort">SMTP Port</label>
                            <input type="number" id="smtpPort" placeholder="587">
                        </div>
                        <div class="form-group">
                            <label for="smtpUser">SMTP Username</label>
                            <input type="text" id="smtpUser" placeholder="your-email@gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="smtpPassword">SMTP Password</label>
                            <input type="password" id="smtpPassword" placeholder="Your app password">
                        </div>
                        <div class="form-group">
                            <label for="fromEmail">From Email</label>
                            <input type="email" id="fromEmail" placeholder="noreply@fizflashcard.com">
                        </div>
                        <div class="form-group">
                            <label for="fromName">From Name</label>
                            <input type="text" id="fromName" placeholder="FizFlashcard Team">
                        </div>
                    </div>
                </div>
                <button class="form-submit" id="savePaymentSettings">Save All Settings</button>
            </div>
            
            <!-- Pending Requests Tab -->
            <div class="admin-tab-content" id="pendingTab" style="display: none;">
                <h4>Pending Access Requests</h4>
                <div class="pending-requests-container">
                    <div class="requests-filter">
                        <button class="filter-btn active" data-filter="all">All Requests</button>
                        <button class="filter-btn" data-filter="pending">Pending</button>
                        <button class="filter-btn" data-filter="approved">Approved</button>
                        <button class="filter-btn" data-filter="rejected">Rejected</button>
                        </div>
                    <div class="requests-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Plan</th>
                                    <th>Payment Method</th>
                                    <th>Amount</th>
                                    <th>Transaction ID</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pendingRequestsBody">
                                <!-- Pending requests will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Database Configuration Tab -->
            <div class="admin-tab-content" id="databaseTab" style="display: none;">
                <h4>Supabase Database Configuration</h4>
                <div class="database-config-section">
                    <div class="config-status">
                        <h5>Current Configuration Status</h5>
                        <div id="configStatus" class="status-display">
                            <div class="status-item">
                                <span class="status-label">Database URL:</span>
                                <span class="status-value" id="urlStatus">Not configured</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">API Key:</span>
                                <span class="status-value" id="keyStatus">Not configured</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Service Key:</span>
                                <span class="status-value" id="serviceKeyStatus">Not configured</span>
                            </div>
                    </div>
                </div>
                
                    <div class="config-form">
                        <h5>Configure Supabase Connection</h5>
                        <div class="form-group">
                            <label for="supabaseUrl">Supabase URL</label>
                            <input type="url" id="supabaseUrl" placeholder="https://your-project.supabase.co">
                        </div>
                        <div class="form-group">
                            <label for="supabaseKey">Supabase Anon Key</label>
                            <input type="text" id="supabaseKey" placeholder="Your Supabase anon/public key">
                        </div>
                    <div class="form-group">
                            <label for="supabaseServiceKey">Supabase Service Key (Optional)</label>
                            <input type="text" id="supabaseServiceKey" placeholder="Your Supabase service role key">
                        </div>
                        <button class="form-submit" id="saveSupabaseConfig">Save Configuration</button>
                        <button class="form-submit secondary" id="testSupabaseConnection">Test Connection</button>
                    </div>
                    
                    <div class="config-help">
                        <h5>Setup Instructions</h5>
                        <ol>
                            <li>Create a new project at <a href="https://supabase.com" target="_blank">supabase.com</a></li>
                            <li>Go to Settings > API in your Supabase dashboard</li>
                            <li>Copy your Project URL and anon/public key</li>
                            <li>Paste them in the form above and click "Save Configuration"</li>
                            <li>Test the connection to ensure everything is working</li>
                        </ol>
                        <p><strong>Note:</strong> The service key is optional and only needed for admin operations.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="changePasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Password</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmNewPassword">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" required>
                </div>
                <button type="submit" class="form-submit">Change Password</button>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal" id="adminLoginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Admin Login</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="adminId">Admin ID</label>
                    <input type="text" id="adminId" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" required>
                </div>
                <button type="submit" class="form-submit">Login as Admin</button>
                <div class="form-footer">
                    <p><a href="#" id="resetAdminCreds">Reset admin credentials to default</a></p>
                </div>
            </form>
        </div>
    </div>
</body>
</html>